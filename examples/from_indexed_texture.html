<!DOCTYPE html>
<html>
<head>
	<title>Example spriteActions from indexedTexture</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, shrink-to-fit=no">
	<style type="text/css">

		* {
			margin: 0;
			padding: 0;
		}

		#world {
			position: fixed;
			width: 100% ;
			height: 100% ;
			background-color: grey;
		}
		
	</style>
</head>


<body>

	<canvas id="world"></canvas>

	<script src="libs/three.js"></script>
	<script src="libs/stats.min.js"></script>
	<script src="build/SpriteMixer.js"></script>

	<script>
		
		var scene, camera, renderer, stats;
		var clock, delta, spriteMixer, actionSprite;
		var actions = {};

		const WIDTH = window.innerWidth;
		const HEIGHT = window.innerHeight;

		window.addEventListener('load', ()=> {
			init();
			loop();
		})




		function init() {


			/////////////////////////
			///  BASIC THREE CODE
			/////////////////////////

			scene = new THREE.Scene();
			scene.background = new THREE.Color( 'green' );

			camera = new THREE.PerspectiveCamera( 70, WIDTH/HEIGHT, 1, 50 );
			camera.position.z = 10 ;
			camera.lookAt( 0, 0, 0 );

			renderer = new THREE.WebGLRenderer({ canvas: document.querySelector('#world') });
			renderer.setSize( WIDTH, HEIGHT );

			stats = new Stats();
			document.body.appendChild( stats.dom );

			clock = new THREE.Clock();

			var loader = new THREE.TextureLoader();



			///////////////////////////////
			///  SPRITEMIXER RELATED CODE
			///////////////////////////////

			spriteMixer = SpriteMixer();

			loader.load("./textures/character.png", (texture)=> {

				actionSprite = spriteMixer.ActionSprite( texture, 10, 2 );
				actions.runRight = spriteMixer.Action(actionSprite, 0, 8, 500);
				actions.runLeft = spriteMixer.Action(actionSprite, 10, 18, 500);

				actions.runLeft.playLoop();
				// actionSprite.setFrame(9);

				actionSprite.scale.set(1.7, 2, 1);
				scene.add( actionSprite );
			});


		};




		function loop() {
			requestAnimationFrame(loop);
			renderer.render( scene, camera );
			stats.update();

			////// UPDATING

			delta = clock.getDelta();
			spriteMixer.update( delta );
		};

	</script>



</body>
</html>